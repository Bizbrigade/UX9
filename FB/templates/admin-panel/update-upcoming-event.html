{% extends 'admin-panel/base.html' %}
{% block content %}
{% load static %}

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0">Update Event</h1>
                        </div><!-- /.col -->
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="{% url 'admin' %}">Home</a></li>
                                <li class="breadcrumb-item active">Update Event</li>
                            </ol>
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            </div>
            <!-- /.content-header -->
            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <!-- Info boxes -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card card-primary card-outline card-outline-tabs">
                                <div class="card-header p-0 border-bottom-0">
                                    <ul class="arrow-tab nav nav-tabs" id="custom-tabs-four-tab" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="tab-first" data-toggle="pill"
                                                href="#custom-tab-first" role="tab" aria-controls="custom-tab-first"
                                                aria-selected="true">Basic Info <img src="./images/right-arrow.png"
                                                    alt=""></a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="tab-second" data-toggle="pill"
                                                href="#custom-tab-second" role="tab" aria-controls="custom-tab-second"
                                                aria-selected="false">SEO & Analytics <img
                                                    src="./images/right-arrow.png" alt=""></a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="card-body">
                                    <div class="tab-content" id="custom-tabs-four-tabContent">
                                        <!-- First -->
                                        <div class="tab-pane fade active show" id="custom-tab-first" role="tabpanel"
                                            aria-labelledby="tab-first">
                                            <!-- form start -->
                                            <form method="post" enctype="multipart/form-data">
                                                {% csrf_token %}
                                                {% if msg %}
                                                <div class="alert alert-success alert-dismissible fade show" role="alert">
                                                    <strong>{{msg}}</strong> 
                                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                      <span aria-hidden="true">&times;</span>
                                                    </button>
                                                  </div>
                                                {% endif %}
                                                <div class="card-body">
                                                    <div class="form-group">
                                                        <label for="event-head">Event Title :</label>
                                                        <input type="text" name="event_title" value="{{event_data.event_title}}" class="form-control" id="event-head"
                                                            placeholder="Event title write here" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="event-image">Event image :</label>
                                                        <div class="input-group">
                                                            <div class="custom-file">
                                                                <input type="file" name="event_image" value="{{event_data.event_image}}" class="custom-file-input"
                                                                    id="event-image" accept="image/*" >
                                                                <label class="custom-file-label"
                                                                    for="event-image">Choose
                                                                    Image</label>
                                                            </div>
                                                        </div>
                                                        <small class="form-text">Upload event image 830*400 px for best
                                                            view</small>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="event-url">Event Link</label>
                                                        <input type="url" name="event_url" class="form-control" id="event-url" value="{{event_data.event_url}}"
                                                            placeholder="Event Link">
                                                    </div>

                                                    <div class="form-group">
                                                        <label for="event-date">Event date</label>
                                                        <input type="datetime-local" name="event_date" value="{{event_data.event_date|date:'Y-m-d H:i:s'}}" class="form-control" id="event-date"
                                                            placeholder="Event date write here" >
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="event-content">Event content</label>
                                                        <textarea class="form-control" name="event_content" value="{{event_data.event_content}}" rows="4" id="event-content"
                                                            placeholder="Content for the event">{{event_data.event_content|safe}}</textarea>
                                                    </div>
                                                    <!--  -->
                                                    <!-- <div class="form-group flex-end">
                                                        <label class="form-check-label" for="radio1"
                                                            onclick="showContent('toggleBrand')">Do you want to convert
                                                            this event to previous event.</label>
                                                        <div class="form-check ms-2">
                                                            <input class="form-check-input" type="radio" name="radio"
                                                                id="radio1" onclick="showContent('toggleBrand')">
                                                            <label class="form-check-label" for="radio1">Yes</label>
                                                        </div>
                                                        <div class="form-check ms-2">
                                                            <input class="form-check-input" type="radio" name="radio"
                                                                id="radio2" onclick="hideContent('toggleBrand')"
                                                                checked>
                                                            <label class="form-check-label" for="radio2">No</label>
                                                        </div>
                                                    </div>
                                                    <div class="form-group" id="toggleBrand" style="display: none;">
                                                        <label for="event-image">Previous event images :</label>
                                                        <div class="input-group">
                                                            <div class="custom-file">
                                                                <input type="file" class="custom-file-input"
                                                                    id="event-image" accept="image/*" required>
                                                                <label class="custom-file-label"
                                                                    for="event-image">Choose
                                                                    Image</label>
                                                            </div>
                                                        </div>
                                                        <small class="form-text">Upload previous event images 540*300 px
                                                            for best view</small>
                                                    </div> -->
                                                    <!-- /. -->
                                                </div>
                                                <!-- /.card-body -->

                                                <div class="card-footer">
                                                    <button type="button" class="btn btn-1 float-left bg-red"
                                                        data-toggle="modal" data-target="#modal-default">Delete</button>
                                                    <button type="submit" class="btn btn-1 float-right">Update</button>
                                                </div>
                                                <!-- delete button modal -->
                                                <div class="modal fade" id="modal-default"
                                                    style="display: none;" aria-modal="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                            <div class="modal-header border-0">
                                                                <h4 class="modal-title">Delete Event</h4>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close">
                                                                    <span aria-hidden="true">×</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body py-0">
                                                                <p>Do you want to delete this event permanently.</p>
                                                                <small>To confirm this type "DELETE"</small>
                                                            </div>
                                                            {% comment %} <form method="delete"> {% endcomment %}
                                                            <div class="modal-footer justify-content-between border-0">
                                                                <input type="text" class="form-control w-auto" name="confirm" value="{{i.id}}" id="confirm-btn">
                                                                {% comment %} <input type="submit" class="btn btn-1 bg-red" value="Delete"></input> {% endcomment %}
                                                                <a href="{% url 'update-single-event' pk=event_data.id %}?action=delete" class="btn btn-1 bg-red">Delete</a>
                                                            {% comment %} </form> {% endcomment %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /. delete button modal -->
                                            </form>
                                        </div>
                                        <!-- Second -->
                                        <div class="tab-pane fade" id="custom-tab-second" role="tabpanel"
                                            aria-labelledby="tab-second">
                                            <form id="form1" runat="server">
                                                <div id="TextBoxContainer">
                                                    <!--Textboxes will be added here -->
                                                </div>
                                                <br />
                                                <asp:Button ID="btnPost" runat="server" Text="Post"
                                                    OnClick="Post"/>
                                                    <input class="btn btn-1" id="btnAdd" type="button" value="Add Keyword"
                                                    onclick="AddTextBox()" />
                                        <button type="submit" class="btn btn-1 float-right">Update</button>
                                            </form>
                                        </div>
                                        <!--  -->
                                    </div>
                                </div>
                                <!-- /.card -->
                            </div>
                        </div>
                    </div>
                    <!-- /.row -->

                </div>
                <!--/. container-fluid -->
            </section>
            <!-- /.content -->
        </div>
        <script type="text/javascript">

            function GetDynamicTextBox(value, id_value) {
                return '<input name="brand_seo_keywords" id="' + id_value + '" onkeyup="wordLimit(this, 1);"  type="text" value = "' + value + '" />' +
                    '<input type="button" value="Remove" onclick = "RemoveTextBox(this)" />'
            }
    
    
    
            function AddTextBox() {
                var div = document.createElement('DIV');
                div.innerHTML = GetDynamicTextBox("", "seo_add_list");
                document.getElementById("TextBoxContainer").appendChild(div);
    
            }
            function RemoveTextBox(div) {
                document.getElementById("TextBoxContainer").removeChild(div.parentNode);
            }
    
            function RecreateDynamicTextboxes() {
                var values = eval('<%=Values%>');
                if (values != null) {
                    var html = "";
                    for (var i = 0; i < values.length; i++) {
                        html += "<div>" + GetDynamicTextBox(values[i]) + "</div>";
                    }
                    document.getElementById("TextBoxContainer").innerHTML = html;
                }
            }
            window.onload = RecreateDynamicTextboxes;
        </script>
    
        <!-- /.content-wrapper -->
{% endblock %}